@page "/"

@inject ResizeListener listener
@implements IDisposable
@using responsive_form.Models 

<TelerikForm Model="@person"
             Columns="@ColumnsCount"
             ColumnSpacing="15px"
             Orientation="@FormOrientation.Horizontal">
</TelerikForm>


@code {
    #region Form
    public int ColumnsCount => isMediumSize ? 1 : GetColumnsCount();

    private int GetColumnsCount()
    {
        // sample logic based on the number of fields in the model
        // feel free to implement as needed in your project, even hardcode a number
        Type t = typeof(Person);
        int propertiesCount = t.GetProperties().Count();

        return propertiesCount % 5;
    }

    Person person = new Person();


    #endregion

    #region Responsive

    BrowserWindowSize windowSize = new BrowserWindowSize();

    bool isSmallSize { get; set; }
    bool isMediumSize { get; set; }

    protected override void OnAfterRender(bool firstRender)
    {
        base.OnAfterRender(firstRender);
        if (firstRender)
        {
            listener.OnResized += WindowResized;
        }
    }

    public void Dispose()
    {
        listener.OnResized -= WindowResized;
    }

    async void WindowResized(object _, BrowserWindowSize size)
    {
        windowSize = size;

        isMediumSize = await listener.MatchMedia(Breakpoints.MediumDown);

        StateHasChanged();
    }

    #endregion
}